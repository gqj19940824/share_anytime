
<#include "/comm/head.html"/>
<body>
<style>
    .el-header .el-input__inner{ width:140px; }
    .el-date-editor { width:140px !important; }
    .el-header{ padding: 0 5px }
    .el-main {
        padding: 0px;
        margin: 0px;
        overflow:visible !important;
    }
</style>
<div id="app">
<el-container>
    <el-header>

        <div  style="height:40px;padding-top: 5px;">

            <el-form :inline="true">
                <el-button type="primary" icon="el-icon-success" @click="determine()">确定</el-button>
                <el-form-item label="机构名称">
                    <el-input style="wdith:60px"  v-model="search.name.data" placeholder="请输入内容"></el-input>
                </el-form-item>
                <el-button-group>
                    <el-tooltip class="item" effect="dark" content="搜索" placement="bottom">
                        <el-button type="primary" icon="el-icon-search" @click="handleSearch()"></el-button>
                    </el-tooltip>
                    <el-tooltip class="item" effect="dark" content="清空" placement="bottom">
                        <el-button type="primary" icon="fa fa-repeat" @click="handleReset()"></el-button>
                    </el-tooltip>
                </el-button-group>
            </el-form>

        </div>
    </el-header>
    <el-main>
            <el-table
                    row-style="height:15px"
                    cell-style="padding:5px"
                    :header-cell-style="{
                        'background-color': '#fafafa',
                        'color': '#333',
                        'border-bottom': '1px solid #fafafa'
                    }"
                    :data="tableData"
                    ref="multipleTable"
                    highlight-current-row
                    @current-change="handleCurrentChange2"
                    style='width:98%;'
                    :height="tableHeight"
                    border>
                <!--<el-table-column
                        type="selection"
                        width="55">
                </el-table-column>-->
                <el-table-column
                        type="index"
                        label="序号"
                        width="50">
                </el-table-column>
                <el-table-column
                        prop='name'
                        min-width="150"
                        label="机构名称">
                </el-table-column>
                <el-table-column
                        prop='gmtModified'
                        min-width="110"
                        label="修改时间">
                </el-table-column>
                <el-table-column
                        prop='editor'
                        min-width="70"
                        label="修改人">
                </el-table-column>
                <el-table-column
                        prop='notes'
                        label="备注">
                </el-table-column>
            </el-table>

            <div align="center">
                <el-pagination
                        @size-change="handleSizeChange"
                        @current-change="handleCurrentChange"
                        :current-page="currentPage"
                        :page-sizes="[10, 20, 30, 40]"
                        :page-size="pagesize"
                        layout="total, sizes, prev, pager, next, jumper"
                        :total="totalCount">
                </el-pagination>
            </div>
    </el-main>
</el-container>
</div>

<#include "/comm/js.html"/>

<script type="text/javascript">

    var vue = loadTable({
            data:{
                bck_data:{
                    id:null,
                    name:''
                },
                search:{
                    name:{op:"cn",data:""},
                    editor:{op:"cn",data:""},
                    gmtModified:[{op:"ge",data:""},{op:"le",data:""}]
                }
            },
            urlList:"${base}/respdepartment/listAllByPage",
            urlDel:"${base}/respdepartment/del/",
            urlEdit:"${base}/respdepartment/view/editEntrance/${iframe}",
            urlChangeOrder:"${base}/respdepartment/changeOrder",
            urlExport:"${base}/respdepartment/export/excel",
            dialogWidth:600,
            dialogHeight:300,
            title:'响应部门表',
            dialogIndex:0,
            methods:{
                determine: function () {
                    var bck_data = this.$data.bck_data;
                    if(bck_data.id == null){
                        v.$message.error("请选择一个企业");
                        return;
                    }
                    v.dialogHide(2);
                    window.parent.frames["${iframe}"].contentWindow.vue.${method}( bck_data );
                },
                handleCurrentChange2(val) {
                    //console.log("选中事件： "+val);
                    this.$data.bck_data.id = val.id;
                    this.$data.bck_data.name = val.name;
                }
            }
        });




</script>
</body>